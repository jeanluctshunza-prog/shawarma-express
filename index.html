<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shawarma Express - Menu Mobile</title>
    <link rel="icon" type="image/jpeg" href="favicon.jpeg">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;900&display=swap" rel="stylesheet">
    <style>
        :root { --noir: #000000; --blanc: #ffffff; --gris: #f4f4f4; --rouge: #ff0000; --or: #ffd700; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; font-family: 'Poppins', sans-serif; background: var(--blanc); color: var(--noir); padding-bottom: 20px; overflow-x: hidden; }

        header { background: var(--noir); padding: 15px; text-align: center; position: sticky; top: 0; z-index: 1000; }
        .brand { display: flex; flex-direction: column; align-items: center; gap: 5px; }
        .brand img { width: 50px; height: 50px; border-radius: 50%; border: 2px solid var(--or); object-fit: cover; }
        .logo-text { font-weight: 900; color: var(--blanc); font-size: 0.8rem; letter-spacing: 2px; }

        /* CAROUSEL INFINI */
        .carousel-container { width: 100%; overflow: hidden; background: #fff; padding: 20px 0; border-bottom: 1px solid #eee; }
        .carousel-track { display: flex; gap: 20px; animation: scroll-infinite 25s linear infinite; width: max-content; }
        
        .slide-item { width: 100px; text-align: center; flex-shrink: 0; }
        .slide-item img { width: 80px; height: 80px; border-radius: 50%; object-fit: cover; border: 3px solid var(--noir); }
        .slide-item p { font-size: 0.7rem; font-weight: 900; margin-top: 8px; text-transform: uppercase; color: #333; }

        @keyframes scroll-infinite {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        .delivery-info { background: var(--noir); color: white; padding: 10px; margin: 15px; font-size: 0.7rem; border-radius: 50px; text-align: center; font-weight: 600; }
        .menu-section { padding: 0 15px; }
        .section-title { color: #000; font-size: 0.9rem; font-weight: 900; text-transform: uppercase; margin: 20px 0 10px; border-bottom: 2px solid #000; display: inline-block; }

        .menu-item { display: flex; align-items: center; justify-content: space-between; padding: 15px 0; border-bottom: 1px solid #f8f8f8; }
        .item-info { display: flex; align-items: center; gap: 12px; flex: 1; }
        
        .checkbox-custom { appearance: none; width: 24px; height: 24px; border: 2px solid #000; border-radius: 6px; cursor: pointer; position: relative; flex-shrink: 0; }
        .checkbox-custom:checked { background: #000; }
        .checkbox-custom:checked::after { content: '‚úì'; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: #fff; font-size: 16px; font-weight: bold; }
        
        .item-img { width: 60px; height: 60px; border-radius: 12px; object-fit: cover; background: #f9f9f9; }
        .item-details b { display: block; font-size: 0.9rem; color: #222; }
        .item-details span { color: var(--rouge); font-size: 0.85rem; font-weight: 900; }
        
        .qty-input { width: 50px; height: 35px; border: 1px solid #ddd; text-align: center; font-size: 0.9rem; font-weight: 900; border-radius: 8px; }

        /* ZONE COMMANDE */
        #order-container { display: none; padding-bottom: 120px; }
        .form-section { background: var(--gris); padding: 20px; margin: 15px; border-radius: 15px; }
        .form-section input { width: 100%; padding: 12px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 8px; font-family: inherit; }

        .order-bar { position: fixed; bottom: 0; width: 100%; background: #fff; padding: 15px; z-index: 2000; box-shadow: 0 -10px 30px rgba(0,0,0,0.1); border-radius: 25px 25px 0 0; }
        .total-box { display: flex; justify-content: space-between; font-weight: 900; margin-bottom: 12px; font-size: 1.2rem; }
        .btn-wa { display: block; background: #25D366; color: #fff; text-align: center; padding: 15px; text-decoration: none; font-weight: 900; border-radius: 15px; }
        
        footer { padding: 40px 15px 150px; font-size: 0.7rem; color: #999; text-align: center; }
    </style>
</head>
<body>

<header>
    <div class="brand">
        <img src="favicon.jpeg" alt="Logo">
        <div class="logo-text">SHAWARMA EXPRESS</div>
    </div>
</header>

<div class="carousel-container">
    <div class="carousel-track">
        <div class="slide-item"><img src="menu1.jpg"><p>Shawarma</p></div>
        <div class="slide-item"><img src="menu2.jpg"><p>Tacos</p></div>
        <div class="slide-item"><img src="menu3.jpg"><p>Burger</p></div>
        <div class="slide-item"><img src="menu4.jpg"><p>Sandwich</p></div>
        <div class="slide-item"><img src="menu5.jpg"><p>Poulet</p></div>
        <div class="slide-item"><img src="menu6.jpg"><p>Frites</p></div>
        <div class="slide-item"><img src="menu7.jpg"><p>Glaces</p></div>
        <div class="slide-item"><img src="menu8.jpg"><p>Boissons</p></div>
        <div class="slide-item"><img src="menu1.jpg"><p>Shawarma</p></div>
        <div class="slide-item"><img src="menu2.jpg"><p>Tacos</p></div>
        <div class="slide-item"><img src="menu3.jpg"><p>Burger</p></div>
        <div class="slide-item"><img src="menu4.jpg"><p>Sandwich</p></div>
        <div class="slide-item"><img src="menu5.jpg"><p>Poulet</p></div>
        <div class="slide-item"><img src="menu6.jpg"><p>Frites</p></div>
        <div class="slide-item"><img src="menu7.jpg"><p>Glaces</p></div>
        <div class="slide-item"><img src="menu8.jpg"><p>Boissons</p></div>
    </div>
</div>

<div class="delivery-info">LIVRAISON PARTOUT √Ä LUBUMBASHI üõµ</div>

<div class="menu-section">
    <div class="section-title">Notre Carte</div>
    <div id="dynamic-menu">
        <p style="text-align:center; padding:50px;">Chargement du menu...</p>
    </div>
</div>

<div id="order-container">
    <div class="form-section">
        <b style="display:block; margin-bottom:10px;">INFOS DE LIVRAISON</b>
        <input type="text" id="nom" placeholder="Votre Nom">
        <input type="text" id="adresse" placeholder="Quartier et R√©f√©rence">
        <input type="tel" id="tel" placeholder="N¬∞ de T√©l√©phone">
    </div>

    <div class="order-bar">
        <div class="total-box"><span>TOTAL</span> <span id="tot" style="color:var(--rouge)">0</span> <span style="color:var(--rouge)">FC</span></div>
        <a href="javascript:void(0)" class="btn-wa" onclick="send()">COMMANDER SUR WHATSAPP</a>
    </div>
</div>

<footer>
    üìç MAMA YEMO COIN KAMBOVE, LUBUMBASHI<br>
    Ouvert de 08h00 √† 18h00<br>
    ¬© 2026 Shawarma Express
</footer>

<script>
    const sheetUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTkJSa9W3yY0DWRPyJpD3LDYnv7r-EuryFJD0yN2qqZp2lb9bqDAhXoL3MjPX9Io4ujP1V3scMWs-90/pub?output=csv";

    async function loadMenu() {
        try {
            const response = await fetch(sheetUrl);
            const data = await response.text();
            // On divise par ligne, et on ignore la toute premi√®re ligne (titres)
            const rows = data.split("\n").slice(1);
            let html = "";

            rows.forEach(row => {
                const cols = row.split(",");
                // ON LIT LES 3 COLONNES : NOM (0), PRIX (1), PHOTO (2)
                if (cols.length >= 3) {
                    const name = cols[0].trim();
                    const price = cols[1].trim().replace(/[^0-9]/g, ''); 
                    const photo = cols[2].trim();

                    if(name !== "") {
                        html += `
                            <div class="menu-item" data-price="${price}" data-name="${name}">
                                <div class="item-info">
                                    <input type="checkbox" class="checkbox-custom" onchange="upd()">
                                    <img src="${photo}" class="item-img" onerror="this.src='favicon.jpeg'">
                                    <div class="item-details">
                                        <b>${name}</b>
                                        <span>${Number(price).toLocaleString()} FC</span>
                                    </div>
                                </div>
                                <input type="number" value="1" min="1" class="qty-input" onchange="upd()">
                            </div>
                        `;
                    }
                }
            });
            document.getElementById('dynamic-menu').innerHTML = html;
        } catch (e) {
            document.getElementById('dynamic-menu').innerHTML = "Erreur de chargement du menu.";
        }
    }

    let sel = []; let t = 0;
    function upd() {
        t = 0; sel = [];
        document.querySelectorAll('.menu-item').forEach(m => {
            const c = m.querySelector('.checkbox-custom');
            const q = m.querySelector('.qty-input');
            if(c.checked) {
                let p = parseInt(m.dataset.price) * parseInt(q.value);
                t += p;
                sel.push(`*${q.value}x* ${m.dataset.name} (${p.toLocaleString()} FC)`);
            }
        });
        
        document.getElementById('order-container').style.display = (t > 0) ? 'block' : 'none';
        document.getElementById('tot').innerText = t.toLocaleString();
    }

    function send() {
        const n = document.getElementById('nom').value.trim();
        const a = document.getElementById('adresse').value.trim();
        const p = document.getElementById('tel').value.trim();
        if(!n || !a || !p) return alert("Veuillez remplir vos infos de livraison !");
        
        const msg = `*NOUVELLE COMMANDE - SHAWARMA EXPRESS*%0A---------------------------%0Aüë§ *Client :* ${n}%0Aüìç *Lieu :* ${a}%0Aüìû *Tel :* ${p}%0A---------------------------%0Aüç¥ *D√©tails :*%0A- ${sel.join('%0A- ')}%0A---------------------------%0Aüí∞ *TOTAL : ${t.toLocaleString()} FC*%0A---------------------------%0A_Commande via menu digital_`;
        
        window.open(`https://wa.me/243853319140?text=${msg}`);
    }

    loadMenu();
</script>
</body>
</html>
